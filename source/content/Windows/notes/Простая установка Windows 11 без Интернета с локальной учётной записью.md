Последние версии образов Windows 11 требуют обязательного подключения к Интернету при установке и максимально затрудняют использование локальной учётной записи вместо аккаунта Майкрософт, однако способы обойти ограничения есть. В этой инструкции подробно о том, как выполнить чистую установку Windows 11 без доступа в Интернет и использовать при этом локальную учётную запись.


## Принудительное создание локальной учетной записи на этапе OOBE
---
После процесса копирования файлов Windows 11 и первой перезагрузки вы попадёте на экран OOBE (Out Of the Box Experience) для настроек. В любой момент на этом экране, даже в самом начале вы можете инициировать создание локальной учётной записи, в том числе и без наличия Интернет-подключения.

Шаги будут следующими:

1.  Нажмите клавиши `Shift+F10` на клавиатуре (на некоторых ноутбуках может потребоваться нажать `Shift+Fn+F10`).
2.  Откроется окно командной строки (нажмите по нему: по умолчанию оно не активно сразу после открытия).
3.  Введите команду `start ms-cxh:localonly` и нажмите `Enter`.

    ```
    start ms-cxh:localonly
    ```
4.  Появится окно создания локальной учётной записи, введите нужные данные: имя пользователя и, если требуется — пароль с подтверждением.
5.  Нажмите «Далее».

На этом всё, локальная учетная запись будет создана и дальнейшие шаги в OOBE, включая обязательное подключение к Интернету, проделывать не потребуется. Вы увидите экран подготовки системы к первому запуску.

После чего вам будет предложено настроить базовые параметры конфиденциальности, и вы окажетесь в свежеустановленной Windows 11 с вашей локальной учётной записью.

## Отключение требований Windows 11 на доступ к Интернету и включение возможности создания локального пользователя
---
Начать следует с простой установки Windows 11. Если у вас прямое кабельное подключение к Интернету (не Wi-Fi и не требуется авторизация), заранее отключите кабель. Выполняем все действия по установке до первой перезагрузки и появления окна базовой настройки системы.

Затем, чтобы отключить обязательное требование к наличию Интернет-подключения при установке Windows 11, потребуется выполнить следующие шаги:

1.  Дойдя до экрана «Давайте подключим вас к сети», не подключайтесь к Интернету (при кабельном подключении стоит заранее отключить кабель), а нажмите клавиши `Shift+F10` (на некоторых ноутбуках — `Shift+Fn+F10`), это откроет командную строку (по умолчанию окно не активно, нажмите по нему, чтобы вводить текст). В принципе, `Shift+F10` можно использовать и на первом экране настроек, не доходя до этого окна, если вы уверены, что Интернет отключен.
2.  В командной строке введите команду (переключение языка по Alt+Shift): `oobe\bypassnro` и нажмите `Enter`.

    ```
    oobe\bypassnro
    ```

    В последних предварительных сборках команда может не работать, в таком случае используйте следующий вариант из двух команд:

    ```
    reg add HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\OOBE /v BypassNRO /t REG_DWORD /d 1 /f
    shutdown /r /t 0
    ```
3.  Компьютер перезагрузится, и вы снова попадете на экран первоначальной настройки Windows 11, но теперь, дойдя до экрана с предложением подключиться к Сети, вы увидите пункт «У меня нет Интернета» — нажмите по нему.
4.  Нажмите «Продолжить ограниченную установку».
5.  Продолжайте установку, теперь — с созданием локальной учётной записи вместо учётной записи Майкрософт.

По завершении процесса вы получите полностью работоспособную Windows 11 с локальной учётной записью, теперь можно смело подключаться к Интернету для загрузки обновлений, драйверов и других целей.